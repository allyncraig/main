<!DOCTYPE html>
<html>
	<head>
		<link rel="stylesheet" type="text/css" href="mobileui/style.css">
		<link rel="manifest" href="/manifest.json">
		<link rel="apple-touch-icon" href="apple-touch-icon.png">
		<meta name="mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="default">
		<meta nme="theme-color" content="#FFFFFF"> 
		<meta name="format-detection" content="telephone=no">
		<meta charset="utf-8">
		<meta name="msapplication-tap-highlight" content="no">
		<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">
		<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate, max-age=0">
		<meta http-equiv="Pragma" content="no-cache">
		<meta http-equiv="Expires" content="0">
		<meta http-equiv="Content-Security-Policy" content="default-src 'self' data: gap: https://ssl.gstatic.com 'unsafe-eval' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; media-src *; img-src 'self' data: content:; connect-src 'self' https://formsubmit.co https://bible-api.bible-api.workers.dev https://docs.google.com https://api.scripture.api.bible https://bolls.life https://bible.helloao.org https://labs.bible.org https://craigappfoundry.github.io;">
		<link rel="stylesheet" type="text/css" href="css/ConfigManager.css">
		<link rel="stylesheet" type="text/css" href="css/ModalManager.css">
		<link rel="stylesheet" type="text/css" href="css/index.css">
		<title>My Bible App</title>
	</head>
<body>

	<!-- Header Bar -->
	<div class="header-bar">
		<button class="header-button hidden" id="dailyReadingBackButton" onclick="exitDailyReadingMode()"><i class="icon ion-android-arrow-back"></i></button>
		<div class="header-title" id="headerTitle">My Bible App</div>
		<div class="header-buttons">
			<button class="header-button" id="searchButton"><i class="icon ion-android-search"></i></button>
			<button class="header-button" id="menuButton"><i class="icon ion-android-more-vertical"></i></button>
		</div>
	</div>

	<!-- Main Content Area -->
	<div class="content-area" id="mainContent">
		<div class="placeholder" id="mainPlaceholder">
			Bible chapter text will appear here.<br>
			Use the navigation buttons below to select a chapter.
		</div>
		<div id="bibleHeader"></div>
		<div id="bibleText"></div>
	</div>

	<!-- Main Content Header Template -->
	<template id="chapterHeaderTemplate">
		<div class="view-page">
			<h2 class="view-page-book">{{bookName}}</h2>
			<h3 class="view-page-chapter">Chapter {{chapter}}</h3>
			<div class="view-page-version">{{versionName}}</div>
		</div>
	</template>

	<!-- Verse Template -->
	<template id="verseTemplate">
		<p class="verse" data-book="{{bookId}}" data-chapter="{{chapter}}" data-verse="{{verseNumber}}">
			<span class="verse-number">{{verseNumber}}</span>{{noteIcon}}&nbsp;{{verseText}}
		</p>
	</template>
	<!-- Interlinear Verse Template -->
	<template id="interlinearVerseTemplate">
		<p class="verse verse-primary" data-book="{{bookId}}" data-chapter="{{chapter}}" data-verse="{{verseNumber}}">
			<span class="verse-number">{{verseNumber}}</span>{{noteIcon}}&nbsp;{{verseTextA}}
		</p>
		<p class="verse verse-secondary" data-book="{{bookId}}" data-chapter="{{chapter}}" data-verse="{{verseNumber}}">
			<span class="verse-number">{{verseNumber}}</span>{{noteIcon}}&nbsp;{{verseTextB}}
		</p>
	</template>

	<!-- Footer Bar -->
	<div class="footer-bar">
		<div class="footer-left">
			<button class="nav-button icon ion-chevron-left" id="prevChapter" aria-label="Previous Chapter"></button>
			<button class="nav-button chapter-button" id="chapterSelect">GEN 1</button>
			<button class="nav-button icon ion-chevron-right" id="nextChapter" aria-label="Next Chapter"></button>
		</div>
		<div class="footer-right">
			<button class="nav-button version-button" id="versionButton">BSB</button>
		</div>
	</div>

	<!-- Menu Modal -->
	<div id="menuModal" class="modal-overlay menu-modal">
		<div class="menu-content stable">
			<!-- <button onclick="showVotD()" class="menu-item">Verse of the Day</button> -->
			<!-- <button onclick="showVotD(true)" class="menu-item">Reload VotD</button> -->
			<button onclick="showReadingPlan()" class="menu-item">Reading Plan</button>
			<button onclick="showBookmark()" class="menu-item">Edit Bookmark</button>
			<button onclick="showAllNotes()" class="menu-item">View All Notes</button>
			<button onclick="showConfigure()" class="menu-item">Configure</button>
			<button onclick="showDownload()" class="menu-item">Download</button>
			<!-- TEST MENU ITEMS -->
			<button onclick="showLog()" id="menuItemShowLog" class="menu-item hidden">Show Log</button>
			<!-- <button onclick="clearBookCache()" class="menu-item">Clear Book Cache</button> -->
			<!-- <button onclick="showStorage()" class="menu-item">Manage Storage</button> -->
			<!-- END TEST MENU ITEMS -->
			<button onclick="showContact()" class="menu-item">Contact Us</button>
			<button onclick="showAbout()" class="menu-item">About</button>
		</div>
	</div>

	<!-- Verse Menu Modal -->
	<div id="verseMenuModal" class="modal-overlay menu-modal">
		<div class="menu-content movable">
			<button onclick="gotoBookmark();closeModal(MODAL.VERSEMENU)" class="menu-item" id="menuGotoBookmark">Go To Bookmark</button>
			<button onclick="bookmarkSet()" class="menu-item">Bookmark This Verse</button>
			<button onclick="showNoteEditor()" class="menu-item">Add/Edit Note</button>
			<button onclick="showSuggestEdit()" class="menu-item" id="menuSuggestEdit">Suggest Edit</button>
		</div>
	</div>

	<!-- Splash Modal -->
	<div id="splashModal" class="splash-modal">
		<div class="splash-content">
			<img class="splash-image" alt="App Icon showing a head with a Bible inside." src="img/bible.png" />
			<p class="splash-info" id="splash-info"></p>
		</div>
	</div>

	<!-- Dialog Modals -->
	<!-- Chapter Selector Modal -->
	<div id="chapterModal" class="modal-overlay">
		<div class="modal-wrapper">
			<div class="modal-header">
				<h3 class="modal-title" id="selectorTitle">Select Book & Chapter</h3>
				<button onclick="closeModal(MODAL.CHAPTER)" class="modal-close-button">&times;</button>
			</div>
			<div id="selectorContent" class="modal-content"></div>
		</div>
	</div>

	<!-- Version Selector Modal -->
	<div id="versionModal" class="modal-overlay">
		<div class="modal-wrapper">
			<div class="modal-header">
				<h3 class="modal-title">Select Version</h3>
				<button onclick="closeModal(MODAL.VERSION)" class="modal-close-button">&times;</button>
			</div>
			<div class="modal-content">
				<button id="versionInterlinearButton" class="version-item version-item-interlinear {{selected}}" onclick="toggleInterlinearFromVersionSelector()">
					<div class="version-item-info">
						<span class="version-abbr">Interlinear</span>
						<div class="version-name" id="interlinearVersionText">Compare Versions</div>
					</div>
				</button>
				<div class="version-header">BIBLE VERSIONS</div>
				<div id="versionList"></div>
			</div>
		</div>
	</div>

	<template id="versionTemplate">
		<button class="version-item {{selected}}" onclick="selectVersion(this)" data-abbreviation="{{abbreviation}}">
			<div class="version-item-info">
				<span class="version-abbr">{{abbreviation}}</span>
				<span class="version-lang">({{languageCode}})</span>
				<div class="version-name">{{name}}</div>
				<span class="badge {{hidden}}">LOCAL</span>
			</div>
		</button>
	</template>

	<!-- About Modal -->
	<div id="aboutModal" class="modal-overlay">
		<div class="modal-wrapper">
			<div class="modal-header">
				<h3 class="modal-title" id="aboutTitle"></h3>
				<button onclick="closeModal(MODAL.ABOUT)" class="modal-close-button">&times;</button>
			</div>
			<div class="modal-content about-modal" id="aboutMessage">
			</div>
		</div>
	</div>

	<!-- Configuration Modal -->
	<div id="configModal" class="modal-overlay">
		<div class="modal-wrapper config-modal">
			<div class="modal-header">
				<h3 class="modal-title">Configuration</h3>
				<button onclick="closeModal(MODAL.CONFIG)" class="modal-close-button">&times;</button>
			</div>
			<div id="configurationPage" class="modal-content"></div>
		</div>
	</div>

	<!-- Download Modal -->
	<div id="downloadModal" class="modal-overlay">
		<div class="modal-wrapper">
			<div class="modal-header">
				<h3 class="modal-title">Download Version</h3>
				<button onclick="closeModal(MODAL.DOWNLOAD)" class="modal-close-button">&times;</button>
			</div>
			<div class="modal-content middle" id="downloadVersionHeader">
				Select a version to download for offline reading:
			</div>
			<div class="modal-content">
				<div class="list" id="downloadVersionList"></div>
			</div>
		</div>
	</div>

	<!-- Template for download version items -->
	<template id="downloadVersionTemplate">
		<div class="item clickable download-item-box" data-onclick="handleDownloadItemClick('{{code}}', {{exists}})">
			<div class="download-item-text">
				<span class="text-bold">{{code}}</span>&nbsp;
				<span>{{name}}</span>
				<span class="badge {{hidden}}">DOWNLOADED</span>
			</div>
		</div>
	</template>

	<!-- Search Modal -->
	<div id="searchModal" class="modal-overlay">
		<div class="modal-wrapper">
			<div class="modal-header">
				<h3 class="modal-title">Search Bible</h3>
				<button onclick="closeModal(MODAL.SEARCH)" class="modal-close-button">&times;</button>
			</div>
			<div class="search-box">
				<input type="text" id="searchInput" class="testbox-search" placeholder="Enter search term..." />
				<button class="icon ion-android-search" id="searchExecuteButton" onclick="executeSearch()"></button>
			</div>
			<div id="searchMessage" class="modal-content">
				<div class="placeholder" id="searchMessageText">Enter a search term to find verses</div>
			</div>
			<div id="searchList" class="modal-content"></div>
		</div>
	</div>

	<!-- Template for search result items -->
	<template id="searchTemplate">
		<div class="search-item" onclick="app.searchManager.handleResultClick(this)" data-book="{{bookAbbr}}" data-chapter="{{chapter}}" data-verse="{{verse}}">
			<div class="search-content">
				<div class="search-result-reference">{{reference}}</div>
				<div class="search-result-text">{{text}}</div>
			</div>
		</div>
	</template>

	<!-- Bookmark Modal -->
	<div id="bookmarkModal" class="modal-overlay">
		<div class="modal-wrapper">
			<div class="modal-header">
				<h3 class="modal-title">Bookmark</h3>
				<button onclick="closeModal(MODAL.BOOKMARK)" class="modal-close-button">&times;</button>
			</div>
			<div class="modal-content">
				<div class="standard-label">Bookmarked Verse: <span class="text-bold" id="bookmarkSavedVerse">None</span></div>
				<button onclick="gotoBookmark()" class="standard-button icon ion-ios-book">Go To This Verse</button>
				<button onclick="bookmarkClear()" class="standard-button icon ion-trash-a">Clear Bookmark</button>
			</div>
		</div>
	</div>

	<!-- Note Editor Modal -->
	<div id="noteModal" class="modal-overlay higher">
		<div class="modal-wrapper narrow">
			<div class="modal-header">
				<h3 class="modal-title" id="noteTitle">Verse Notes</h3>
				<button onclick="closeModal(MODAL.NOTE)" class="modal-close-button">&times;</button>
			</div>
			<div class="modal-content">
				<div class="standard-label"><span id="noteLabel">Commentary for</span> <span class="text-bold" id="noteReference">None</span></div>
				<button onclick="copyVerseText()" class="standard-button icon ion-ios-copy-outline" id="noteCopyButton">Copy Verse Text</button>
				<div><textarea id="noteText" class="note-textarea"></textarea></div>
				<button onclick="noteGoToVerse()" class="standard-button icon ion-ios-book hidden" id="noteGoToVerseButton">Go to Verse</button>
				<button onclick="noteSave()" class="standard-button icon ion-edit" id="noteSaveButton">Save Note</button>
				<button onclick="noteCancel()" class="standard-button icon ion-trash-a" id="noteCancelButton">Clear Note</button>
			</div>
		</div>
	</div>

	<!-- All Notes Modal -->
	<div id="allNotesModal" class="modal-overlay">
		<div class="modal-wrapper">
			<div class="modal-header">
				<h3 class="modal-title">All Notes</h3>
				<button onclick="closeModal(MODAL.ALLNOTES)" class="modal-close-button">&times;</button>
			</div>
			<div id="allNotesMessage" class="modal-content middle">
				<div class="placeholder" id="allNotesInfo">You have no notes yet</div>
			</div>
			<div id="allNotesResult" class="modal-content">
				<div class="list align-left" id="allNotesList"></div>
			</div>
		</div>
	</div>

	<!-- Template for note items -->
	<template id="noteItemTemplate">
		<div class="item note-list-item" onclick="editNoteFromList('{{key}}')">
			<div class="note-list-item-text">
				<span class="note-reference">{{reference}}</span>
				<span class="note-preview">{{text}}</span>
			</div>
		</div>
	</template>

	<!-- Reading Plan Modal -->
	<div id="readingPlanModal" class="modal-overlay">
		<div class="modal-wrapper">
			<div class="modal-header">
				<h3 class="modal-title" id="readingPlanTitle">Today's Bible Reading</h3>
				<button onclick="closeModal(MODAL.READINGPLAN)" class="modal-close-button">&times;</button>
			</div>
			<div class="modal-content reading-plan-modal">
				<!-- Day Cards Section -->
				<div class="daily-reading-cards-container">
					<div id="dailyReadingCards" class="daily-reading-cards">
						<!-- Day cards render here dynamically -->
					</div>
				</div>

				<!-- Current Day Header -->
				<div id="readingPlanHeader" class="plan-day-header">
					<div class="plan-day-header-text">Day <span id="readingPlanDoY"></span> of <span id="readingPlanTotal"></span></div>
					<div class="plan-day-header-date" id="readingPlanDate"></div>
				</div>

				<!-- Chapter Readings List (Fixed Height Container) -->
				<div id="readingPlanListContainer" style="min-height: 315px;">
					<div id="readingPlanList"></div>
				</div>

				<!-- Progress Section -->
				<div id="dailyReadingProgress" class="daily-reading-progress">
					<div class="progress-text">Progress: <span id="progressCount">0/365</span> days (<span id="progressPercent">0%</span>)</div>
					<div class="progress-bar-container">
						<div id="progressBar" class="progress-bar" style="width: 0%"></div>
					</div>
				</div>

				<!-- Exit Button (visible only in daily reading mode) -->
				<div>
					<button id="exitDailyReadingButton" class="hidden plan-button" onclick="exitDailyReadingMode()">Exit Daily Reading Mode</button>
				</div>
			</div>
		</div>
	</div>

	<!-- Template for reading plan items -->
	<template id="readingPlanTemplate">
		<div class="reading-item {{hidden}}">
			<button onclick="navigateToReading('{{reference}}', '{{day}}', '{{index}}')" class="reading-button">
				{{reference}}
			</button>
			<button data-state="{{state}}" data-day="{{day}}" data-index="{{index}}" class="icon ion-android-checkbox-outline{{state}} reading-checkbox" onclick="toggleReadingComplete(this)"></button>
		</div>
	</template>

	<!-- Day Complete Modal -->
	<div id="dayCompleteModal" class="modal-overlay">
		<div class="modal-wrapper">
			<div class="modal-header">
				<h3 class="modal-title">Day Complete!</h3>
			</div>
			<div class="modal-content middle">
				<p class="daycomplete-message">
					Great job finishing Day <span id="completedDayNumber"></span>'s readings!
				</p>
			</div>
			<div class="modal-content daycomplete-button-row">
				<button onclick="dayCompleteReturnToBible()" class="daycomplete-button icon ion-ios-book">Return to Bible</button>
				<button onclick="dayCompleteOK()" class="daycomplete-button icon ion-checkmark-circled">OK</button>
			</div>
		</div>
	</div>

	<!-- Contact Modal -->
	<div id="contactModal" class="modal-overlay">
		<div class="modal-wrapper">
			<div class="modal-header">
				<h3 class="modal-title">Contact Us</h3>
				<button onclick="closeModal(MODAL.CONTACT)" class="modal-close-button">&times;</button>
			</div>
			<div class="modal-content">
				<p class="standard-label">
					Thank you for taking the time to contact us. Please fill out the form below.
				</p>

				<!-- Contact Type Radio Group -->
				<div class="config-item">
					<label class="config-label">Contact Type:</label>
					<div class="config-radio-group">
						<label class="config-radio-option">
							<input type="radio" name="contactType" value="Bug Report" id="bug_report" class="config-radio-input">
							<span class="config-radio-label">Bug Report</span>
						</label>
						<label class="config-radio-option">
							<input type="radio" name="contactType" value="Feature Request" id="feature_request" class="config-radio-input">
							<span class="config-radio-label">Feature Request</span>
						</label>
						<label class="config-radio-option">
							<input type="radio" name="contactType" value="General Comment" id="comment" class="config-radio-input" checked>
							<span class="config-radio-label">General Comment</span>
						</label>
					</div>
				</div>

				<!-- Message Textarea -->
				<div class="config-item">
					<label class="config-label" for="contactComments">Enter Your Message:</label>
					<textarea id="contactComments" class="note-textarea" placeholder="Type your message here..."></textarea>
				</div>

				<!-- Send Button -->
				<button class="standard-button icon ion-paper-airplane" onclick="sendContactMessage()">Send Message</button>
			</div>
		</div>
	</div>

	<!-- TEST AREA REMOVE BEFORE RELEASE -->
	<!-- Log Modal -->
	<div id="logModal" class="modal-overlay">
		<div class="modal-wrapper">
			<div class="modal-header">
				<h3 class="modal-title">Log Messages</h3>
				<button onclick="closeModal(MODAL.LOG)" class="modal-close-button">&times;</button>
			</div>
			<div id="logResults" class="modal-content white">
				<div>
					<button onclick="clearLogMessages()" class="standard-button icon ion-trash-a">Clear Log</button>
					<button onclick="clearReadingPlan()" class="standard-button icon ion-bug">Clear Reading Plan</button>
				</div>
				<div class="log-label">
					Log Messages:
				</div>
				<div id="logMessageList" class="list white"></div>
			</div>
		</div>
	</div>

	<!-- Template for log entry items -->
	<template id="logMessageTemplate">
		<div class="item radius margin-bottom shadow">
			<div class="log-item">
				<div class="flex1 white font14 text-grey-900 padding">
					<span class="text-bold">{{type}}</span>&nbsp;<span>{{message}}</span>
				</div>
			</div>
		</div>
	</template>
	<!-- END TEST AREA REMOVE BEFORE RELEASE -->

	<!-- JS libraries -->
	<script type="text/javascript" src="cordova.js"></script>
	<!-- <script type="text/javascript" src="js/customtags.js"></script> -->
	<script type="text/javascript" src="js/jszip.min.js"></script>
	<script type="text/javascript" src="js/bible_versions.js"></script>
	<script type="text/javascript" src="mobileui/mobileui.js"></script>
	<script type="text/javascript" src="js/HTTPClient.js"></script>
	<script type="text/javascript" src="js/Template.js"></script>
	<script type="text/javascript" src="js/book_data.js"></script>
	<!-- App Classes -->
	<script type="text/javascript" src="js/class/ConfigManager.js"></script>
	<script type="text/javascript" src="js/class/StorageManager.js"></script>
	<script type="text/javascript" src="js/class/APIClient.js"></script>
	<script type="text/javascript" src="js/class/IndexedDBManager.js"></script>
	<script type="text/javascript" src="js/class/VersionManager.js"></script>
	<script type="text/javascript" src="js/class/ContentRenderer.js"></script>
	<script type="text/javascript" src="js/class/NavigationManager.js"></script>
	<script type="text/javascript" src="js/class/SearchManager.js"></script>
	<script type="text/javascript" src="js/class/ModalManager.js"></script>
	<script type="text/javascript" src="js/class/DownloadManager.js"></script>
	<script type="text/javascript" src="js/class/DailyReadingManager.js"></script>
	<!-- API Provider Plugins -->
	<script type="text/javascript" src="js/providers/BaseProvider.js"></script>
	<script type="text/javascript" src="js/providers/AbtApiProvider.js"></script>
	<script type="text/javascript" src="js/providers/APIBibleProvider.js"></script>
	<script type="text/javascript" src="js/providers/BollsLifeProvider.js"></script>
	<script type="text/javascript" src="js/providers/HelloAOProvider.js"></script>
	<script type="text/javascript" src="js/providers/ProviderFactory.js"></script>
	<!-- App JavaScript -->
	<script type="text/javascript" src="js/index.js"></script>
</body>
</html>
